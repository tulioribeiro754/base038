<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Produto | BASE038</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

<header class="header">
    <div class="logo">BASE038</div>
    <nav class="nav">
        <a href="index.html">Home</a>
        <a href="carrinho.html">Carrinho</a>
    </nav>
</header>

<section class="container" id="produto"></section>

<script>
const params = new URLSearchParams(window.location.search);
const id = params.get("id");

fetch("http://localhost:3000/api/produtos")
.then(res => res.json())
.then(produtos => {
    const p = produtos.find(x => x._id === id);
    produto.innerHTML = `
        <div class="card">
            <img src="${p.imagem}">
            <h2>${p.nome}</h2>
            <p>R$ ${p.preco.toFixed(2)}</p>
            <button class="btn-neon" onclick="add()">Adicionar ao carrinho</button>
        </div>
    `;

    window.add = () => {
        const carrinho = JSON.parse(localStorage.getItem("carrinho")) || [];
        carrinho.push(p);
        localStorage.setItem("carrinho", JSON.stringify(carrinho));
        window.location.href = "carrinho.html";
    };
});
</script>

</body>
</html>
